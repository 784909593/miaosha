# Java 秒杀系统：一个“电商秒杀”案例

**简介：该项目是一个在“秒杀”这一 Java 高性能高并发的场景下，利用横向扩展、异步队列、多级缓存等多种技术，来完成对高并发场景的应对。**

## 目录

- [项目的基本框架及配置](#项目的基本框架及配置)
- [分布式扩展](#分布式扩展)
- [查询性能优化技术之多级缓存](#查询性能优化技术之多级缓存)
- [查询性能优化技术之页面静态化](#查询性能优化技术之页面静态化)
- [交易性能优化技术之缓存库存](#交易性能优化技术之缓存库存)
- [交易性能优化技术之事务型消息](#交易性能优化技术之事务型消息)
- [流量削峰技术](#流量削峰技术)
- [防刷限流技术](#防刷限流技术)
- [功能扩展](#功能扩展)

## 项目的基本框架及配置 ##

应用 SpringBoot 加 MyBatis 技术结合电商秒杀的业务特点完成电商秒杀项目的基础项目搭建，包括用户管理模块，商品模块，活动模块以及交易模块,实现项目结构分层、业务逻辑分层、领域模型分层。

## 分布式扩展 ##

针对单机容量瓶颈的天花板，在其基础上利用 Nginx 进行反向代理负载均衡的优化。

使用 Nginx 做了动静分离的服务器部署。

在项目中引入分布式会话管理的机制解决了登录态一致性的问题。

## 查询性能优化技术之多级缓存 ##

针对商品详情页对应的动态请求的性能做了优化。

通过多级缓存：Redis、Guava Cache、Nginx Lua 缓存实现了一套削峰的多级缓存方案。

依靠不同的热点分类使用不同类型的多级缓存并设置不同的失效策略，解决动态请求的性能问题。

## 查询性能优化技术之页面静态化 ##

将静态页面部署到 CDN 上。

使用了 PhantomJs 的无头浏览器方案实现了将静态请求和动态请求合并一同部署到 CDN 上，进一步提升了商品详情页的流量能力。

## 交易性能优化技术之缓存库存 ##

对下单交易进行了性能优化。

通过交易验证缓存的优化，库存缓存模型优化解决了交易流程中繁琐耗性能的验证缓存，并解决数据库库存行锁的问题。

但同时也引入了缓存与数据库分布式提交过程中不一致的风险。

## 交易性能优化技术之事务型消息 ##

针对缓存库存所引入的事务不一致的问题，使用了异步化的事务型消息解决了最终一致性的问题。

同时引入库存售罄这样的方案解决过载击穿的问题。

## 流量削峰技术 ##

即便查询优化，交易优化技术用到极致后，只要外部的流量超过了系统可承载的范围就有拖垮系统的风险。

针对以上问题通过秒杀令牌，秒杀大闸，队列泄洪等流量削峰技术解决了全站的流量高性能运行效率。

## 防刷限流技术 ##

针对常见的黄牛入侵手段，以及使用对应的防刷手段防止黄牛入侵。

同时业务的发展预估永远可能高于系统可承载的能力，因此需使用限并发、令牌桶算法、漏桶算法等多种限流技术保证系统的稳定。

应用验证码技术在防刷的同时，实现流量错峰。

## 功能扩展 ##

- 对更多数据库读操作实现热点缓存。
- 对更多数据库写操作实现数据缓存与异步化操作。
- 实现更多更高效的应对黄牛的防刷技术

......


